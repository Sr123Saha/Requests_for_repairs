ПРОТОКОЛ ФУНКЦИОНАЛЬНОГО ТЕСТИРОВАНИЯ
====================================

Система: модуль учёта заявок на ремонт климатического оборудования  
СУБД: SQLite (файл climate_repair.db)  
Интерфейс: веб‑приложение Flask


Форма записи тестов (пояснение)
-------------------------------

Номер теста  
Функция / модуль  
Входные данные / шаги  
Ожидаемый результат  
Фактический результат  
Статус (пройден / не пройден)  
Примечание


Тесты
-----

Т‑01  
Функция / модуль: Авторизация пользователя  
Входные данные / шаги:
- открыть страницу входа;
- ввести логин существующего пользователя с ролью «Менеджер» (например, login1);
- ввести корректный пароль (например, pass1);
- нажать кнопку «Войти».  
Ожидаемый результат:
- успешный вход в систему;
- перенаправление на страницу со списком заявок;
- в правой части панели навигации отображается ФИО пользователя и роль «Менеджер».  
Фактический результат: соответствует ожидаемому.  
Статус: пройден.  
Примечание: нет.


Т‑02  
Функция / модуль: Авторизация заблокированного пользователя  
Входные данные / шаги:
- в таблице users установить is_active = 0 для одного тестового пользователя;
- открыть страницу входа;
- ввести логин и пароль данного пользователя;
- нажать кнопку «Войти».  
Ожидаемый результат:
- вход не выполняется;
- выводится сообщение о блокировке учётной записи с рекомендацией обратиться к менеджеру;
- пользователь остаётся на странице входа.  
Фактический результат: соответствует ожидаемому.  
Статус: пройден.  
Примечание: нет.


Т‑03  
Функция / модуль: Создание новой заявки заказчиком  
Входные данные / шаги:
- авторизоваться под пользователем с ролью «Заказчик»;
- открыть раздел «Новая заявка»;
- убедиться, что поле «Заказчик» недоступно для редактирования и установлено равным текущему пользователю;
- заполнить дату, тип и модель оборудования, описание проблемы;
- не выбирать мастера (оставить пустым);
- отправить форму.  
Ожидаемый результат:
- данные проходят валидацию;
- создаётся новая запись в таблице requests со статусом «Новая заявка»;
- client_id заявки совпадает с идентификатором текущего пользователя;
- выводится сообщение об успешном создании заявки с указанием номера заявки;
- новая заявка отображается в списке заявок данного заказчика.  
Фактический результат: соответствует ожидаемому.  
Статус: пройден.  
Примечание: нет.


Т‑04  
Функция / модуль: Ограничение видимости заявок для заказчика  
Входные данные / шаги:
- авторизоваться под пользователем с ролью «Заказчик»;
- открыть страницу со списком заявок.  
Ожидаемый результат:
- в списке отображаются только те заявки, у которых client_id равен user_id текущего пользователя;
- заявки других клиентов не отображаются.  
Фактический результат: соответствует ожидаемому.  
Статус: пройден.


Т‑05  
Функция / модуль: Редактирование заявки специалистом  
Входные данные / шаги:
- авторизоваться под пользователем с ролью «Специалист»;
- найти заявку, где данный специалист назначен как исполнитель;
- открыть карточку редактирования заявки;
- изменить статус заявки (например, «В процессе ремонта» → «Готова к выдаче»);
- при необходимости добавить комментарий (если предусмотрен);
- сохранить изменения.  
Ожидаемый результат:
- проверка прав допускает редактирование заявки;
- статус заявки обновляется в БД;
- в истории статусов (request_history) появляется новая запись;
- на странице списка заявок отображается новый статус.  
Фактический результат: соответствует ожидаемому.  
Статус: пройден.


Т‑06  
Функция / модуль: Управление пользователями менеджером  
Входные данные / шаги:
- авторизоваться под пользователем с ролью «Менеджер»;
- открыть раздел «Управление пользователями»;
- изменить роль одного из тестовых пользователей (например, «Заказчик» → «Оператор»);
- при необходимости изменить признак активности;
- сохранить изменения.  
Ожидаемый результат:
- изменения роли и активности сохраняются в таблице users;
- выводится уведомление об успешном изменении роли;
- при последующем входе под этим пользователем ему доступны функции в соответствии с новой ролью.  
Фактический результат: соответствует ожидаемому.  
Статус: пройден.


Т‑07  
Функция / модуль: Расчёт статистики  
Входные данные / шаги:
- убедиться, что в таблице requests есть несколько заявок со статусом «Завершена» и заполненными датами начала и завершения;
- авторизоваться под пользователем с ролью, имеющей доступ к статистике (например, «Менеджер»);
- открыть раздел «Статистика».  
Ожидаемый результат:
- отображается количество завершённых заявок (число больше нуля);
- отображается среднее время выполнения заявки в днях;
- выводится таблица с количеством заявок по типам оборудования;
- при отсутствии завершённых заявок отображается информативное сообщение об отсутствии данных.  
Фактический результат: соответствует ожидаемому.  
Статус: пройден.


Т‑08  
Функция / модуль: Генерация QR‑кода для отзыва  
Входные данные / шаги:
- авторизоваться в системе;
- на странице списка заявок нажать кнопку «QR» для одной из заявок;
- открыть сгенерированное изображение QR‑кода на отдельной вкладке;
- отсканировать QR‑код с помощью мобильного устройства.  
Ожидаемый результат:
- формируется изображение QR‑кода в формате PNG;
- при сканировании QR‑кода на телефоне открывается страница Google‑формы для оценки качества работы сервисной службы.  
Фактический результат: соответствует ожидаемому.  
Статус: пройден.


Вывод
-----

Проведённое функциональное тестирование по ключевым сценариям (аутентификация, работа с заявками, управление пользователями, статистика, генерация QR‑кода) показало корректную работу программного модуля. Выявленные в процессе разработки ошибки были устранены до проведения итогового тестирования.


